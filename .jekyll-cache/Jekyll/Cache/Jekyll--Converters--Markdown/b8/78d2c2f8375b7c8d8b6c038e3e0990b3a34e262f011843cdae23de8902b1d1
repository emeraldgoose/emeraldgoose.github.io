I"ÓX<h2 id="a-10yen-stamp">A. 10yen Stamp</h2>
<p>10ì—” ìŠ¤íƒ¬í”„ë¥¼ ëª¨ì•„ì„œ í˜„ì¬ $X$ì—ì„œ ëª©í‘œì¹˜ $Y$ë¥¼ ë‹¬ì„±í•  ë•Œê¹Œì§€ ëª‡ ë²ˆì„ ë´‰íˆ¬ì— ë„£ì–´ì•¼ í•˜ëŠ”ì§€ ê³„ì‚°í•˜ëŠ” ë¬¸ì œì´ë‹¤.<br />
$X$ê°€ $Y$ë³´ë‹¤ í° ê²½ìš° 0ì„ ì¶œë ¥í•´ì£¼ëŠ” ì˜ˆì™¸ì²˜ë¦¬ë§Œ í•´ì£¼ë©´ ëœë‹¤.</p>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;cstring&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;algorithm&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;queue&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;cmath&gt;</span><span class="cp">
#define endl '\n'
#define fastio ios::sync_with_stdio(0); cin.tie(0); cout.tie(0);
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">typedef</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">ll</span><span class="p">;</span>
<span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">ull</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">pii</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">pair</span><span class="o">&lt;</span><span class="n">ll</span><span class="p">,</span> <span class="n">ll</span><span class="o">&gt;</span> <span class="n">pll</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">INF</span> <span class="o">=</span> <span class="mf">1e9</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">fastio</span>
  <span class="c1">//freopen("input.txt", "r", stdin);</span>
  <span class="kt">int</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">;</span> <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">a</span><span class="o">&gt;&gt;</span><span class="n">b</span><span class="p">;</span>
  <span class="k">if</span><span class="p">(</span><span class="n">a</span><span class="o">&gt;=</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="mi">0</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">ceil</span><span class="p">(</span><span class="kt">double</span><span class="p">(</span><span class="n">b</span><span class="o">-</span><span class="n">a</span><span class="p">)</span><span class="o">/</span><span class="mi">10</span><span class="p">);</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="b-a-reverse">B. A Reverse</h2>
<p>ë¬¸ìì—´ $S$ì—ì„œ $L$ë²ˆì§¸ë¶€í„° $R$ë²ˆì§¸ê¹Œì§€ ë¶€ë¶„ë¬¸ìì—´ì„ ë’¤ì§‘ì–´ ì¶œë ¥í•˜ëŠ” êµ¬í˜„ ë¬¸ì œì´ë‹¤.</p>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;cstring&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;algorithm&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;queue&gt;</span><span class="cp">
#define endl '\n'
#define fastio ios::sync_with_stdio(0); cin.tie(0); cout.tie(0);
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">typedef</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">ll</span><span class="p">;</span>
<span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">ull</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">pii</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">pair</span><span class="o">&lt;</span><span class="n">ll</span><span class="p">,</span> <span class="n">ll</span><span class="o">&gt;</span> <span class="n">pll</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">INF</span> <span class="o">=</span> <span class="mf">1e9</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">fastio</span>
  <span class="c1">//freopen("input.txt", "r", stdin);</span>
  <span class="kt">int</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">;</span> <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">a</span><span class="o">&gt;&gt;</span><span class="n">b</span><span class="p">;</span>
  <span class="n">string</span> <span class="n">s</span><span class="p">;</span> <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">s</span><span class="p">;</span>
  <span class="n">string</span> <span class="n">t</span><span class="o">=</span><span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">a</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">b</span><span class="o">-</span><span class="n">a</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
  <span class="n">reverse</span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="n">t</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
  <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">a</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">&lt;&lt;</span><span class="n">t</span><span class="o">&lt;&lt;</span><span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="c-product">C. Product</h2>
<p>$i$ë²ˆì§¸ ê°€ë°©ì— $L_i$ê°œì˜ ê³µì´ ìˆê³  ê° ê³µì€ $a_{ij}$ì˜ ìˆ«ìê°€ ì í˜€ìˆë‹¤.<br />
ëª¨ë“  ê°€ë°©ì—ì„œ ê³µì„ í•˜ë‚˜ì”© ì„ íƒí•˜ê³  ê° ê³µì— ì íŒ ìˆ˜ì˜ ê³±ì´ $X$ì¸ ê²½ìš°ì˜ ìˆ˜ë¥¼ ê³„ì‚°í•˜ëŠ” ë¬¸ì œì´ë‹¤.<br />
ì¤‘ìš”í•œ ì •ë³´ë¡œ $\sum_{i}^N L_i = 10^5$ ì´ë¼ëŠ” ì¡°ê±´ì´ ë¬¸ì œì— ìˆë‹¤. ê·¸ë˜ì„œ dpì²˜ëŸ¼ ì ‘ê·¼í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•  ê²ƒ ê°™ì•„ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì ‘ê·¼í–ˆë‹¤. 
mapì„ ì‚¬ìš©í•´ì„œ ìœ„ì—ì„œë¶€í„° ì–´ë–¤ ê³µì„ ì„ íƒí–ˆì„ ë•Œ ì´ì „ ê°’ì— ë‚˜ëˆˆ ëª«ì„ ë‹¤ìŒ ê°’ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©í–ˆë‹¤.<br />
<code class="language-plaintext highlighter-rouge">current</code>ëŠ” ìœ„ì—ì„œ ì„ íƒí•œ ìˆ˜ë¥¼ ë‚˜ëˆ„ì–´ í˜„ì¬ í•„ìš”í•œ ìˆ˜ë¥¼ ì˜ë¯¸í•˜ê³  <code class="language-plaintext highlighter-rouge">ball</code>ì€ $i$ë²ˆì§¸ ê°€ë°©ì—ì„œ êº¼ë‚¸ ì–´ë–¤ ê³µì— ì íŒ ìˆ˜ë¥¼ ì˜ë¯¸í•œë‹¤.<br />
ê·¸ë ‡ë‹¤ë©´ <code class="language-plaintext highlighter-rouge">current</code>ë¥¼ <code class="language-plaintext highlighter-rouge">ball</code>ë¡œ ë‚˜ëˆ„ì–´ ë–¨ì–´ì§ˆ ë•Œ <code class="language-plaintext highlighter-rouge">m[i][current/ball] += m[i-1][current]</code>ì™€ ê°™ì€ ì‹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œëœë‹¤.<br />
ë‚˜ì¤‘ì— editorialì„ ë³´ë‹ˆê¹Œ dfsë¡œ ì ‘ê·¼í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  ìˆë‹¤.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;cstring&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;algorithm&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;queue&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;map&gt;</span><span class="cp">
#define endl '\n'
#define fastio ios::sync_with_stdio(0); cin.tie(0); cout.tie(0);
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">typedef</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">ll</span><span class="p">;</span>
<span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">ull</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">pii</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">pair</span><span class="o">&lt;</span><span class="n">ll</span><span class="p">,</span> <span class="n">ll</span><span class="o">&gt;</span> <span class="n">pll</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">INF</span> <span class="o">=</span> <span class="mf">1e9</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">fastio</span>
  <span class="c1">//freopen("input.txt", "r", stdin);</span>
  <span class="n">ll</span> <span class="n">n</span><span class="p">,</span><span class="n">x</span><span class="p">;</span> <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">n</span><span class="o">&gt;&gt;</span><span class="n">x</span><span class="p">;</span>
  <span class="n">vector</span><span class="o">&lt;</span><span class="n">ll</span><span class="o">&gt;</span> <span class="n">bag</span><span class="p">[</span><span class="mi">100001</span><span class="p">];</span>
  <span class="k">for</span><span class="p">(</span><span class="n">ll</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ll</span> <span class="n">l</span><span class="p">;</span> <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">l</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">l</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">ll</span> <span class="n">a</span><span class="p">;</span> <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">a</span><span class="p">;</span>
      <span class="n">bag</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">map</span><span class="o">&lt;</span><span class="n">ll</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">m</span><span class="p">[</span><span class="mi">100001</span><span class="p">];</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">bag</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">%</span><span class="n">bag</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">x</span><span class="o">/</span><span class="n">bag</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]]</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">:</span> <span class="n">m</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
      <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">bag</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">size</span><span class="p">();</span><span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="n">first</span><span class="o">&gt;=</span><span class="n">bag</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">it</span><span class="p">.</span><span class="n">first</span><span class="o">%</span><span class="n">bag</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
          <span class="n">m</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">it</span><span class="p">.</span><span class="n">first</span><span class="o">/</span><span class="n">bag</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]]</span><span class="o">+=</span><span class="n">m</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">it</span><span class="p">.</span><span class="n">first</span><span class="p">];</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">m</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="d-count-interval">D. Count Interval</h2>
<p>ì–´ë–¤ ìˆ˜ì—´ $A$ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, ì—°ì†ëœ êµ¬ê°„ì˜ ë¶€ë¶„í•©ì´ $K$ê°€ ë˜ëŠ” ê²½ìš°ë¥¼ ëª¨ë‘ ê³„ì‚°í•˜ëŠ” ë¬¸ì œì´ë‹¤.<br />
ìˆ˜ì—´ì˜ ê¸¸ì´ê°€ $2 \times 10^5$ì´ë¯€ë¡œ $O(N)$ì— ë¬¸ì œë¥¼ í•´ê²°í•´ì•¼ í•œë‹¤.<br />
ì–´ë–¤ êµ¬ê°„í•©ì„ êµ¬í•˜ê¸° ìœ„í•´ì„œëŠ” $K = prefix[i] - prefix[j]$ ë¥¼ ì°¾ì•„ì•¼ í•œë‹¤. ì´ê±¸ ë‹¤ì‹œ ë°”ê¾¸ë©´ $prefix[i]$ì™€ $prefix[i] - K$ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ë©´ ëœë‹¤.<br />
ë³´í†µ ëˆ„ì í•©ì„ ì‚¬ìš©í•´ì„œ ë¬¸ì œë¥¼ í’€ ìˆ˜ ìˆëŠ”ë° $O(1)$ì˜ ì ‘ê·¼ì„ ìœ„í•´ <code class="language-plaintext highlighter-rouge">map</code>ì„ ì‚¬ìš©í•˜ë ¤ê³  í•œë‹¤.<br />
2ì¤‘ forë¬¸ìœ¼ë¡œ $1â‰¤iâ‰¤N, 1â‰¤jâ‰¤i$ë¥¼ ì°¾ìœ¼ë ¤ê³  í•˜ë©´ <code class="language-plaintext highlighter-rouge">TLE</code>ì´ë¯€ë¡œ <code class="language-plaintext highlighter-rouge">map</code>ì„ ì‚¬ìš©í•˜ì—¬ 2ì¤‘ forë¬¸ ê²°ê³¼ì™€ ê°™ê²Œ í•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;cstring&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;algorithm&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;queue&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;map&gt;</span><span class="cp">
#define endl '\n'
#define fastio ios::sync_with_stdio(0); cin.tie(0); cout.tie(0);
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">typedef</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">ll</span><span class="p">;</span>
<span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">ull</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">pii</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">pair</span><span class="o">&lt;</span><span class="n">ll</span><span class="p">,</span> <span class="n">ll</span><span class="o">&gt;</span> <span class="n">pll</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">INF</span> <span class="o">=</span> <span class="mf">1e9</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">fastio</span>
  <span class="c1">//freopen("input.txt", "r", stdin);</span>
  <span class="n">ll</span> <span class="n">n</span><span class="p">,</span><span class="n">k</span><span class="p">;</span> <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">n</span><span class="o">&gt;&gt;</span><span class="n">k</span><span class="p">;</span>
  <span class="n">vector</span><span class="o">&lt;</span><span class="n">ll</span><span class="o">&gt;</span> <span class="n">a</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">prefix</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
  <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span><span class="n">it</span> <span class="o">:</span> <span class="n">a</span><span class="p">)</span> <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">it</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">prefix</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">prefix</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
  <span class="n">map</span><span class="o">&lt;</span><span class="n">ll</span><span class="p">,</span><span class="n">ll</span><span class="o">&gt;</span> <span class="n">m</span><span class="p">;</span>
  <span class="n">ll</span> <span class="n">ans</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="n">ll</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">m</span><span class="p">[</span><span class="n">prefix</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span><span class="o">++</span><span class="p">;</span>
    <span class="n">ans</span><span class="o">+=</span><span class="n">m</span><span class="p">[</span><span class="n">prefix</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="n">k</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">ans</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
:ET